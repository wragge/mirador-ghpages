parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"TNW1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GalleryViewThumbnail=void 0;var e=f(require("react")),t=l(require("@material-ui/core/Avatar")),n=l(require("@material-ui/core/Chip")),r=l(require("@material-ui/icons/CommentSharp")),a=l(require("@material-ui/icons/SearchSharp")),o=l(require("classnames"));require("intersection-observer");var i=l(require("@researchgate/react-intersection-observer")),s=l(require("../lib/MiradorCanvas")),c=l(require("../containers/IIIFThumbnail"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=O();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=exports.GalleryViewThumbnail=function(l){v(f,e.Component);var u=m(f);function f(e){var t;return d(this,f),(t=u.call(this,e)).state={requestedAnnotations:!1},t.handleSelect=t.handleSelect.bind(w(t)),t.handleKey=t.handleKey.bind(w(t)),t.handleIntersection=t.handleIntersection.bind(w(t)),t}return p(f,[{key:"handleSelect",value:function(){var e=this.props,t=e.canvas,n=e.selected,r=e.setCanvas,a=e.focusOnCanvas;n?a():r(t.id)}},{key:"handleKey",value:function(e){var t=this.props,n=t.canvas,r=t.setCanvas,a=t.focusOnCanvas;this.keys={enter:"Enter",space:" "},this.chars={enter:13,space:32},e.key===this.keys.enter||e.which===this.chars.enter||e.key===this.keys.space||e.which===this.chars.space?a():r(n.id)}},{key:"handleIntersection",value:function(e){var t=e.isIntersecting,n=this.props,r=n.annotationsCount,a=n.requestCanvasAnnotations,o=this.state.requestedAnnotations;!t||void 0===r||r>0||o||(this.setState({requestedAnnotations:!0}),a())}},{key:"render",value:function(){var l=this.props,u=l.annotationsCount,f=l.searchAnnotationsCount,d=l.canvas,h=l.classes,p=l.config,v=l.selected,y=new s.default(d);return e.default.createElement(i.default,{onChange:this.handleIntersection},e.default.createElement("div",{key:d.index,className:(0,o.default)(h.galleryViewItem,v?h.selected:"",f>0?h.hasAnnotations:""),onClick:this.handleSelect,onKeyUp:this.handleKey,role:"button",tabIndex:0},e.default.createElement(c.default,{resource:d,labelled:!0,variant:"outside",maxWidth:p.width,maxHeight:p.height,style:{margin:"0 auto",maxWidth:"".concat(Math.ceil(p.height*y.aspectRatio),"px")}},e.default.createElement("div",{className:h.chips},f>0&&e.default.createElement(n.default,{avatar:e.default.createElement(t.default,{className:h.avatar,classes:{circle:h.avatarIcon}},e.default.createElement(a.default,{fontSize:"small"})),label:f,className:(0,o.default)(h.searchChip),size:"small"}),(u||0)>0&&e.default.createElement(n.default,{avatar:e.default.createElement(t.default,{className:h.avatar,classes:{circle:h.avatarIcon}},e.default.createElement(r.default,{className:h.annotationIcon})),label:u,className:(0,o.default)(h.annotationsChip),size:"small"})))))}}]),f}();C.defaultProps={annotationsCount:void 0,config:{height:100,width:null},requestCanvasAnnotations:function(){},searchAnnotationsCount:0,selected:!1};
},{"react":"HdMw","@material-ui/core/Avatar":"CLAr","@material-ui/core/Chip":"kpzq","@material-ui/icons/CommentSharp":"V1QI","@material-ui/icons/SearchSharp":"YnPb","classnames":"G1XI","intersection-observer":"xLPE","@researchgate/react-intersection-observer":"JmAG","../lib/MiradorCanvas":"NM16","../containers/IIIFThumbnail":"Euqj"}],"N2gQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("redux"),t=require("react-redux"),n=u(require("lodash/flatten")),r=require("@material-ui/core/styles"),o=s(require("../state/actions")),i=require("../components/GalleryViewThumbnail"),a=require("../state/selectors");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return{annotationIcon:{height:"1rem",width:"1rem"},annotationsChip:p({},e.typography.caption),avatar:{backgroundColor:"transparent"},chips:{opacity:.875,position:"absolute",right:0,textAlign:"right",top:0},galleryViewItem:{"&$hasAnnotations":{border:"2px solid ".concat(e.palette.action.selected)},"&$selected,&$selected$hasAnnotations":{border:"2px solid ".concat(e.palette.primary.main)},"&:focus":{outline:"none"},"&:hover":{backgroundColor:e.palette.action.hover},border:"2px solid transparent",cursor:"pointer",display:"inline-block",margin:"".concat(e.spacing(1),"px ").concat(e.spacing(.5),"px"),maxHeight:function(e){return e.config.height+45},minWidth:"60px",overflow:"hidden",padding:e.spacing(.5),position:"relative",width:"min-content"},hasAnnotations:{},searchChip:p(p({},e.typography.caption),{},{"&$selected $avatar":{backgroundColor:e.palette.highlights.primary},marginTop:2}),selected:{}}},g=function(e,t){var r=t.canvas,o=t.windowId,i=(0,a.getCurrentCanvas)(e,{windowId:o}),c=(0,a.getSearchAnnotationsForWindow)(e,{windowId:o}),s=(0,n.default)(c.map(function(e){return e.resources})).filter(function(e){return e.targetId===r.id}),u=(0,a.getCompanionWindowsForContent)(e,{content:"annotations",windowId:o}).length>0;return{annotationsCount:function(){if(u)return(0,a.getPresentAnnotationsOnSelectedCanvases)(e,{canvasId:r.id}).reduce(function(e,t){return e+t.resources.filter(function(e){return e.targetId===r.id}).length},0)}(),config:(0,a.getConfig)(e).galleryView,searchAnnotationsCount:s.length,selected:i&&i.id===r.id}},h=function(e,t){var n=t.canvas,r=(t.id,t.windowId);return{focusOnCanvas:function(){return e(o.setWindowViewType(r,"single"))},requestCanvasAnnotations:function(){return e(o.requestCanvasAnnotations(r,n.id))},setCanvas:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e(o.setCanvas.apply(o,[r].concat(n)))}}},y=(0,e.compose)((0,t.connect)(g,h),(0,r.withStyles)(f)),w=exports.default=y(i.GalleryViewThumbnail);
},{"redux":"WZ36","react-redux":"sYSi","lodash/flatten":"L0W7","@material-ui/core/styles":"p0RM","../state/actions":"ifgh","../components/GalleryViewThumbnail":"TNW1","../state/selectors":"guIK"}],"SRYp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GalleryView=void 0;var e=i(require("react")),t=n(require("@material-ui/core/Paper")),r=n(require("../containers/GalleryViewThumbnail"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var c=i?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=d();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=exports.GalleryView=function(n){f(i,e.Component);var o=s(i);function i(){return u(this,i),o.apply(this,arguments)}return a(i,[{key:"render",value:function(){var n=this.props,o=n.canvases,i=n.classes,u=n.viewingDirection,c=n.windowId,a="right-to-left"===u?"rtl":"ltr";return e.default.createElement(t.default,{component:"section",dir:a,square:!0,elevation:0,className:i.galleryContainer,id:"".concat(c,"-gallery")},o.map(function(t){return e.default.createElement(r.default,{key:t.id,windowId:c,canvas:t})}))}}]),i}();b.defaultProps={classes:{},viewingDirection:""};
},{"react":"HdMw","@material-ui/core/Paper":"w1m8","../containers/GalleryViewThumbnail":"N2gQ"}],"amiD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("redux"),r=require("react-redux"),i=require("@material-ui/core/styles"),t=require("../extend/withPlugins"),n=require("../components/GalleryView"),l=require("../state/selectors"),o=function(e,r){var i=r.windowId;return{canvases:(0,l.getCanvases)(e,{windowId:i}),viewingDirection:(0,l.getSequenceViewingDirection)(e,{windowId:i})}},a=function(e){return{galleryContainer:{alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",overflowX:"hidden",overflowY:"scroll",padding:"50px 0 50px 20px",width:"100%"}}},s=(0,e.compose)((0,i.withStyles)(a),(0,r.connect)(o),(0,t.withPlugins)("GalleryView")),u=exports.default=s(n.GalleryView);
},{"redux":"WZ36","react-redux":"sYSi","@material-ui/core/styles":"p0RM","../extend/withPlugins":"SYWF","../components/GalleryView":"SRYp","../state/selectors":"guIK"}]},{},[], null)
//# sourceMappingURL=/GalleryView.60377a17.js.map